<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Rocket League Speedflip Trainer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page">
      <header class="header">
        <h1>Rocket League Speedflip Trainer</h1>
        <p class="subtitle">
          Use this page while running Rocket League with Musty&apos;s Speedflip Kickoff Test
          training pack (<span class="code">A503-264C-A7EB-D282</span>).
        </p>
      </header>

      <main>
        <section class="card">
          <h2>Setup</h2>
          <ol class="setup-list">
            <li>Open Rocket League and load the Musty Speedflip Kickoff Test training pack.</li>
            <li>Connect your controller to your PC.</li>
            <li>Focus this tab once and press any button on your controller so the browser can see it.</li>
            <li>
              When you press <strong>Reset Shot</strong> in-game, click
              <strong>“Start Attempt”</strong> here at the same time.
            </li>
          </ol>
          <div class="status-row">
            <div>
              <span class="status-label">Controller:</span>
              <span id="gamepad-status" class="status-pill status-bad">Not connected</span>
            </div>
            <div>
              <span class="status-label">Attempt:</span>
              <span id="attempt-status" class="status-pill">Waiting</span>
            </div>
          </div>
          <button id="start-attempt-btn" class="primary-button" type="button">
            Start Attempt (press with Reset Shot)
          </button>
        </section>

        <section class="card">
          <h2>Controller Bindings</h2>
          <p class="note">
            Bind each action to match your in‑game controls. By default, nothing is bound.
          </p>

          <div class="bindings-header-row">
            <div id="binding-status" class="binding-status">No binding changes in progress.</div>
            <button id="unbind-all-btn" type="button" class="secondary-button">
              Unbind All
            </button>
          </div>

          <div class="bindings-grid">
            <div class="binding-row">
              <div class="binding-label">Reset Shot (Start Attempt)</div>
              <div class="binding-value" id="binding-reset-label">Not bound</div>
              <button
                type="button"
                class="secondary-button"
                data-bind-action="resetShotButton"
              >
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Jump</div>
              <div class="binding-value" id="binding-jump-label">Not bound</div>
              <button type="button" class="secondary-button" data-bind-action="jumpButton">
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Boost</div>
              <div class="binding-value" id="binding-boost-label">Not bound</div>
              <button type="button" class="secondary-button" data-bind-action="boostButton">
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Throttle (Forward)</div>
              <div class="binding-value" id="binding-throttle-label">Not bound</div>
              <button type="button" class="secondary-button" data-bind-action="throttleButton">
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Reverse</div>
              <div class="binding-value" id="binding-reverse-label">Not bound</div>
              <button type="button" class="secondary-button" data-bind-action="reverseButton">
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Neutral Air Roll</div>
              <div class="binding-value" id="binding-neutral-roll-label">Not bound</div>
              <button
                type="button"
                class="secondary-button"
                data-bind-action="neutralAirRollButton"
              >
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Directional Air Roll Left</div>
              <div class="binding-value" id="binding-dir-roll-left-label">Not bound</div>
              <button
                type="button"
                class="secondary-button"
                data-bind-action="dirAirRollLeftButton"
              >
                Rebind
              </button>
            </div>
            <div class="binding-row">
              <div class="binding-label">Directional Air Roll Right</div>
              <div class="binding-value" id="binding-dir-roll-right-label">Not bound</div>
              <button
                type="button"
                class="secondary-button"
                data-bind-action="dirAirRollRightButton"
              >
                Rebind
              </button>
            </div>
          </div>
        </section>

        <section class="card">
          <h2>Current Attempt Stats</h2>

          <div class="live-angle-row">
            <div>
              <div class="stat-label">Live Stick / Angle (Rocket League view)</div>
              <div class="live-angle-values">
                <span id="live-stick-x">X: 0.00</span>
                <span id="live-stick-y">Y: 0.00</span>
                <span id="live-angle-deg">Angle: –</span>
              </div>
              <div class="stat-help">
                Shows the dodge angle after applying Rocket League-style deadzone and dodge deadzone
                (0° = straight up, negative = up-left, positive = up-right).
              </div>
            </div>
          </div>

          <div class="deadzone-controls">
            <div class="deadzone-group">
              <div class="stat-label">Deadzone</div>
              <div class="deadzone-row">
                <input
                  type="range"
                  id="deadzone-slider"
                  min="0"
                  max="40"
                  value="30"
                />
                <span id="deadzone-value" class="deadzone-value">0.30</span>
              </div>
              <div class="stat-help">
                Matches Rocket League&apos;s controller deadzone. 0.30 is default for most players.
              </div>
            </div>
            <div class="deadzone-group">
              <div class="stat-label">Dodge Deadzone</div>
              <div class="deadzone-row">
                <input
                  type="range"
                  id="dodge-deadzone-slider"
                  min="10"
                  max="100"
                  value="50"
                />
                <span id="dodge-deadzone-value" class="deadzone-value">0.50</span>
              </div>
              <div class="stat-help">
                How far the stick must be pushed before Rocket League lets you dodge in that direction.
              </div>
            </div>
          </div>

          <div class="stats-grid">
            <div class="stat">
              <div class="stat-label">1. Car Settled Before Input</div>
              <div class="stat-value">
                <span id="stat-settle-time">–</span>
                <span id="stat-settle-grade" class="grade-pill">–</span>
              </div>
              <div class="stat-help">
                Time from <strong>Start Attempt</strong> / reset to first input. ≥ 150&nbsp;ms is good.
              </div>
            </div>

            <div class="stat">
              <div class="stat-label">2. Boost Before Throttle</div>
              <div class="stat-value">
                <span id="stat-boost-before-throttle">–</span>
              </div>
              <div class="stat-help">
                Checks if you pressed/held <strong>Boost</strong> before
                <strong>Throttle (RT)</strong> in this attempt.
              </div>
            </div>

            <div class="stat">
              <div class="stat-label">3. Time: First Input → First Jump</div>
              <div class="stat-value">
                <span id="stat-jump-delay-ms">–</span>
                <span id="stat-jump-delay-grade" class="grade-pill">–</span>
              </div>
              <div class="stat-help">
                &lt; 414&nbsp;ms = <span class="grade-text bad">Fast</span>,
                415–460 = <span class="grade-text warn">Bit Fast</span>,
                461–630 = <span class="grade-text good">Perfect</span>,
                631–674 = <span class="grade-text warn">Bit Slow</span>,
                ≥ 675 = <span class="grade-text bad">Slow</span>.
              </div>
            </div>

            <div class="stat">
              <div class="stat-label">4. Speedflip Angle (2nd Jump)</div>
              <div class="stat-value">
                <span id="stat-angle-deg">–</span>
                <span id="stat-angle-grade" class="grade-pill">–</span>
              </div>
              <div class="stat-help">
                Left stick angle when you press <strong>Jump</strong> the second time.
                For a left speedflip, good is between -37° and -23° (up-left).
              </div>
            </div>

            <div class="stat">
              <div class="stat-label">5. Time Between Jumps</div>
              <div class="stat-value">
                <span id="stat-jump-gap-ms">–</span>
                <span id="stat-jump-gap-grade" class="grade-pill">–</span>
              </div>
              <div class="stat-help">
                Time from first to second jump. ≤ 115&nbsp;ms is ideal for a quick diagonal flip.
              </div>
            </div>

            <div class="stat">
              <div class="stat-label">6. Flip Cancel Timing</div>
              <div class="stat-value">
                <span id="stat-cancel-ms">–</span>
                <span id="stat-cancel-grade" class="grade-pill">–</span>
              </div>
              <div class="stat-help">
                Time from second jump to pulling the stick downward (flip cancel).
                &lt; 50&nbsp;ms = good, &lt; 75 = ok, ≥ 76 = bad.
              </div>
            </div>
          </div>

          <div class="timeline-section">
            <div class="timeline-header">
              <span class="stat-label">Input Timeline (Current Attempt)</span>
              <span class="timeline-hint">X-axis: time since Start Attempt (ms). Line = stick angle. Colored bars = Boost / Throttle. Vertical lines = key events.</span>
            </div>
            <canvas id="timeline-canvas" width="900" height="220"></canvas>
          </div>
        </section>

        <section class="card">
          <h2>Recent Attempts</h2>
          <table class="attempts-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Settle (ms)</th>
                <th>Boost&nbsp;→&nbsp;Throttle</th>
                <th>First&nbsp;Input → Jump</th>
                <th>Angle (°)</th>
                <th>Δ Jumps (ms)</th>
                <th>Flip Cancel (ms)</th>
              </tr>
            </thead>
            <tbody id="attempt-history"></tbody>
          </table>
        </section>
      </main>

      <footer class="footer">
        <p>
          This tool uses the browser&apos;s Gamepad API. Keep this tab open while you practice so it
          can read your controller input.
        </p>
      </footer>
    </div>

    <script src="script.js"></script>
  </body>
</html>


